# Web Music Player - Cloudflare Pages Edition

é«˜å“è³ªãªéŸ³æ¥½å†ç”Ÿã¨ãƒãƒ«ãƒãƒ‡ãƒã‚¤ã‚¹åŒæœŸæ©Ÿèƒ½ã‚’å‚™ãˆãŸéŸ³æ¥½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆCloudflare Pageså°‚ç”¨ç‰ˆï¼‰

## ğŸŒŸ ç‰¹å¾´

- âœ¨ **é™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**: Cloudflare Pagesã§å®Œå…¨å‹•ä½œ
- ğŸµ **é«˜éŸ³è³ªå†ç”Ÿ**: Hi-ReséŸ³æºå¯¾å¿œï¼ˆæœ€å¤§192kHz/32bitï¼‰
- ğŸ“± **iPad PWAå¯¾å¿œ**: ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã‚¢ãƒ—ãƒªã¨ã—ã¦ä½¿ç”¨å¯èƒ½
- ğŸ”„ **è‡ªå‹•URLæ›´æ–°**: ãƒˆãƒ³ãƒãƒ«URLã‚’è‡ªå‹•ã§å–å¾—ãƒ»æ›´æ–°
- ğŸ¨ **ãƒ¢ãƒ€ãƒ³UI**: ã‚°ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- ğŸŒ **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: iPadã€PCã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³å¯¾å¿œ

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cloudflare Pages                      â”‚
â”‚                  (é™çš„PWAãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°)                    â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  React + Next.js (Static Export)               â”‚    â”‚
â”‚  â”‚  - UI Components                                â”‚    â”‚
â”‚  â”‚  - State Management (Zustand)                   â”‚    â”‚
â”‚  â”‚  - Audio Player                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ fetch
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Cloudflare Workers                      â”‚
â”‚                  (ãƒˆãƒ³ãƒãƒ«URLä¿ç®¡åº«)                      â”‚
â”‚                                                          â”‚
â”‚  GET  /tunnel â†’ æœ€æ–°ã®ãƒˆãƒ³ãƒãƒ«URLã‚’è¿”ã™                  â”‚
â”‚  POST /tunnel â†’ ãƒˆãƒ³ãƒãƒ«URLã‚’æ›´æ–°                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ tunnel URL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PC (éŸ³æ¥½ã‚µãƒ¼ãƒãƒ¼)                        â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Cloudflare Tunnel                              â”‚    â”‚
â”‚  â”‚  https://xxx.trycloudflare.com                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Music Server (Node.js + Express)              â”‚    â”‚
â”‚  â”‚  - API Endpoints                                â”‚    â”‚
â”‚  â”‚  - Music Streaming                              â”‚    â”‚
â”‚  â”‚  - Database (SQLite)                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
.
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx         # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆPWAãƒ¡ã‚¿ã‚¿ã‚°ï¼‰
â”‚   â”œâ”€â”€ page.tsx           # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ globals.css        # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ«
â”œâ”€â”€ components/            # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ AudioPlayer.tsx
â”‚   â”œâ”€â”€ PlayerBar.tsx
â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ lib/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ api-config.ts     # APIæ¥ç¶šè¨­å®šï¼ˆãƒˆãƒ³ãƒãƒ«URLå–å¾—ï¼‰
â”‚   â””â”€â”€ store.ts          # ZustandçŠ¶æ…‹ç®¡ç†
â”œâ”€â”€ public/               # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ manifest.json     # PWAãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”‚   â””â”€â”€ icon-*.svg        # ã‚¢ã‚¤ã‚³ãƒ³
â”œâ”€â”€ workers/              # Cloudflare Workers
â”‚   â”œâ”€â”€ tunnel-storage.js # ãƒˆãƒ³ãƒãƒ«URLä¿ç®¡åº«
â”‚   â””â”€â”€ wrangler.toml     # Workersè¨­å®š
â”œâ”€â”€ scripts/              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ sync-tunnel.js    # ãƒˆãƒ³ãƒãƒ«URLåŒæœŸ
â”‚   â””â”€â”€ cleanup-for-pages.js # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
â”œâ”€â”€ next.config.js        # Next.jsè¨­å®šï¼ˆé™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‰
â””â”€â”€ package.json          # ä¾å­˜é–¢ä¿‚
```

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. ãƒ“ãƒ«ãƒ‰

```bash
npm run build
```

### 3. Cloudflare Pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤

#### GitHubé€£æºï¼ˆæ¨å¥¨ï¼‰

1. GitHubãƒªãƒã‚¸ãƒˆãƒªã«ãƒ—ãƒƒã‚·ãƒ¥
2. [Cloudflare Dashboard](https://dash.cloudflare.com/) â†’ Pages â†’ Create a project
3. GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ
4. ãƒ“ãƒ«ãƒ‰è¨­å®š:
   - Build command: `npm run build`
   - Build output directory: `out`
5. Deploy

#### Wrangler CLI

```bash
npm install -g wrangler
wrangler login
wrangler pages deploy out --project-name=music-player
```

### 4. Cloudflare Workersã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
cd workers
wrangler deploy
```

Workers URLã‚’å–å¾—ã—ãŸã‚‰ã€`lib/api-config.ts` ã® `WORKERS_URL` ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

### 5. PCå´ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# éŸ³æ¥½ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev

# åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ãƒˆãƒ³ãƒãƒ«ã‚’èµ·å‹•
cloudflared tunnel --url http://localhost:3000

# ãƒˆãƒ³ãƒãƒ«URLã‚’åŒæœŸ
npm run tunnel:sync -- --url https://your-tunnel-url.trycloudflare.com
```

## ğŸ“± iPad PWAã¨ã—ã¦ä½¿ç”¨

1. Safariã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸURLã‚’é–‹ã
2. å…±æœ‰ãƒœã‚¿ãƒ³ï¼ˆâ–¡â†‘ï¼‰ã‚’ã‚¿ãƒƒãƒ—
3. "ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ " ã‚’é¸æŠ
4. "è¿½åŠ " ã‚’ã‚¿ãƒƒãƒ—

ã“ã‚Œã§ã€ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰ã‚¢ãƒ—ãƒªã¨ã—ã¦èµ·å‹•ã§ãã¾ã™ï¼

## ğŸ”§ é–‹ç™º

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º

```bash
npm run dev
```

### ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ

```bash
npm run build
```

### ãƒˆãƒ³ãƒãƒ«URLåŒæœŸ

```bash
npm run tunnel:sync -- --url https://your-tunnel-url.trycloudflare.com
```

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰](README-CLOUDFLARE-PAGES.md)
- [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](DEPLOYMENT-CHECKLIST.md)
- [Workers README](workers/README.md)

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 14** - React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ï¼ˆé™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‰
- **React 18** - UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **TypeScript** - å‹å®‰å…¨æ€§
- **Tailwind CSS** - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Framer Motion** - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **Zustand** - çŠ¶æ…‹ç®¡ç†
- **Radix UI** - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### ã‚¤ãƒ³ãƒ•ãƒ©
- **Cloudflare Pages** - é™çš„ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- **Cloudflare Workers** - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°
- **Cloudflare Tunnel** - ã‚»ã‚­ãƒ¥ã‚¢ãªãƒˆãƒ³ãƒãƒªãƒ³ã‚°

### éŸ³æ¥½ã‚µãƒ¼ãƒãƒ¼ï¼ˆPCå´ï¼‰
- **Node.js** - ãƒ©ãƒ³ã‚¿ã‚¤ãƒ 
- **Express** - Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **SQLite** - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Prisma** - ORM

## ğŸ¯ ä¸»ãªå¤‰æ›´ç‚¹ï¼ˆã‚ªãƒªã‚¸ãƒŠãƒ«ã‹ã‚‰ï¼‰

### å‰Šé™¤ã•ã‚ŒãŸæ©Ÿèƒ½
- âŒ APIãƒ«ãƒ¼ãƒˆï¼ˆ`app/api/`ï¼‰
- âŒ ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- âŒ NextAuthèªè¨¼
- âŒ Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰
- âŒ Socket.ioï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼‰
- âŒ Electronã‚¢ãƒ—ãƒª
- âŒ ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- âŒ ç®¡ç†ç”»é¢

### è¿½åŠ ã•ã‚ŒãŸæ©Ÿèƒ½
- âœ… é™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¯¾å¿œ
- âœ… ãƒˆãƒ³ãƒãƒ«URLè‡ªå‹•å–å¾—
- âœ… Cloudflare Workersçµ±åˆ
- âœ… iPad PWAæœ€é©åŒ–
- âœ… Appleç”¨ãƒ¡ã‚¿ã‚¿ã‚°
- âœ… è‡ªå‹•URLåˆ‡ã‚Šæ›¿ãˆ

### æœ€é©åŒ–
- âš¡ ç”»åƒæœ€é©åŒ–ã‚ªãƒ•ï¼ˆé™çš„ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆç”¨ï¼‰
- âš¡ ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚¹ãƒ©ãƒƒã‚·ãƒ¥æœ‰åŠ¹åŒ–
- âš¡ GPUåŠ é€Ÿ
- âš¡ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- HTTPSå¼·åˆ¶ï¼ˆCloudflare Pagesï¼‰
- CORSè¨­å®šï¼ˆWorkersï¼‰
- ãƒˆãƒ³ãƒãƒ«èªè¨¼ï¼ˆCloudflare Tunnelï¼‰

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ­“è¿ï¼

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€[Issues](https://github.com/your-repo/issues)ã‚’é–‹ã„ã¦ãã ã•ã„ã€‚

---

Made with â¤ï¸ for music lovers
